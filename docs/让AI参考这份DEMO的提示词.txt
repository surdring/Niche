# Role
你是一位拥有 10 年经验的高级全栈工程师和 UI/UX 设计专家，擅长使用 React、Tailwind CSS 和 Vercel AI SDK 构建现代化的 AI 应用。

# Project Goal
请参考一个名为 "Niche: Study Copilot" 的垂直领域 AI 学习助手应用，为我构建（或重构）一个 Web 应用。
该项目的核心理念是：拒绝通用的聊天界面，通过“场景模板”提供专业化的研究与学习体验，强调学术诚信、深度推理和引用溯源。

# Tech Stack Requirements
- **Framework**: React 19 (Vite)
- **Styling**: Tailwind CSS (移动优先，响应式设计)
- **Icons**: Lucide React
- **Charts**: Recharts (用于数据可视化)
- **AI Integration**: Google Gemini API (@google/genai SDK)
- **Language**: TypeScript

# UI/UX Design Language (参考 Niche)
请严格遵循以下视觉风格：
1.  **配色方案**:
    -   **背景**: 极简深色模式。主背景色使用 `slate-950` (#0f172a)，二级背景（侧边栏/卡片）使用 `slate-800` (#1e293b)。
    -   **强调色**: 使用明亮的青蓝色 (#38bdf8) 作为按钮、激活状态和图标的高光。
    -   **文本**: 主文本为 `slate-200`，次要文本为 `slate-400` 或 `slate-500`。
2.  **排版**: 使用 Inter 字体，强调清晰的层级结构。
3.  **动效**:
    -   在模型推理时，需要有 "Thinking Pulse"（呼吸灯）效果。
    -   页面切换要有平滑的淡入淡出 (Fade-in)。
4.  **布局**: 经典的三栏式布局（但在移动端可折叠）：
    -   左侧：导航与历史记录 (Sidebar)
    -   中间：沉浸式对话区域 (Chat Interface)
    -   右侧：知识与引用面板 (Knowledge Panel - 仅在 RAG 模式下显示)

# Key Features & Components Specifications

## 1. 场景模板选择器 (Template Selector)
-   这是应用的“首页”。不要直接进入聊天，而是展示一个 Grid 网格布局。
-   每个卡片代表一个场景（如：研究助手、苏格拉底导师、学术写作）。
-   **卡片内容**: 图标、标题、描述、以及能力标签（Tag）。
-   **能力标签**: 必须显式展示该场景启用的能力，如 [RAG检索]、[深度推理]、[联网搜索]。
-   **交互**: 鼠标悬停时卡片要有轻微的上浮和边框发光效果。

## 2. 增强型对话界面 (Enhanced Chat Interface)
-   **消息气泡**: 用户消息使用深色背景，AI 消息背景透明，左对齐。
-   **推理状态**: 当使用 Gemini 2.0/3.0 等具备推理能力的模型时，在文本生成前，必须展示一个“正在分析与推理...”的动态指示器。
-   **流式输出**: 文本必须是实时流式打字机效果。
-   **输入框**: 悬浮在底部的圆角矩形，支持多行输入，带有明显的发送按钮。

## 3. 知识溯源面板 (Knowledge Panel) - 右侧边栏
-   这是一个独特的功能区，专门用于展示 RAG（检索增强生成）的来源。
-   **图表**: 顶部使用 `Recharts` 绘制一个饼图或环形图，展示知识来源的构成（例如：40% 学术期刊, 30% 网络, 30% 用户文档）。
-   **引用列表**: 下方列出具体的参考文献卡片。包含：[序号]、标题、摘要片段、来源类型（RAGFlow/Google）。
-   **交互**: 点击引用可以跳转或展开详情。

## 4. 侧边导航 (Sidebar)
-   包含“新建会话”的醒目按钮。
-   历史记录列表（按时间排序）。
-   底部包含用户信息和设置入口。

# Business Logic Constraints
1.  **System Instructions**: 必须支持动态切换 System Prompt。选择不同模板时，AI 的人设、语气和回复规则必须改变（例如：导师模式下不直接给答案，而是引导提问）。
2.  **学术诚信**: 在涉及作业解答的场景中，预设 Prompt 必须包含“遵守荣誉准则 (Honor Code)”的指令。

# Code Structure
请保持代码模块化，将 `Sidebar`、`ChatInterface`、`TemplateSelector`、`KnowledgePanel` 拆分为独立的组件。服务层（API 调用）请封装在 `services/` 目录下。

请基于以上需求，开始编写/生成代码。