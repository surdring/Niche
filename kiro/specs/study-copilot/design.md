# Study Copilot 设计文档

## 概述

Study Copilot 是 Niche 框架的第二个场景模板，面向高三学生及家庭，以「Explain & Verify」为核心价值。它基于 Niche 的核心架构（Provider 接口、Zod 结构化输出、流式协议、RAGFlow 外部检索），为高考备考场景提供完整的学习协作能力。

### 设计原则

1. **多模态优先**: 支持拍照上传题目，降低使用门槛
2. **学术诚信**: 检测作业/考试场景，拒绝直接给答案，鼓励理解与推理
3. **数据驱动**: 持久化错题记录，支持聚合分析与个性化建议
4. **渐进式引导**: 通过按钮式追问替代开放提问，符合教育心理学的脚手架理论
5. **可追溯**: 知识点讲解与练习生成可关联教材/题库来源（通过 RAGFlow）

### 与 Research Copilot 的关系

| 维度 | Research Copilot | Study Copilot |
|------|------------------|---------------|
| 目标用户 | 研究者/知识工作者 | 高三学生/家庭 |
| 核心场景 | 文献综述/引用溯源 | 错题复盘/练习生成 |
| RAG 依赖 | 重度（PDF 页码级引用） | 中度（教材/题库检索，可选） |
| 输出形态 | 研究笔记/论文草稿 | 错因分析/练习题/学习计划 |
| 共享能力 | Provider 接口、流式协议、结构化输出、Guardrails |

## 范围与关键决策

### 当前迭代范围

- **核心能力**:
  - 多模态输入（图片 OCR/视觉理解）
  - 错题复盘与错因分析
  - 知识点讲解
  - 巩固练习生成
  - 写作反馈（语文/英语）
  - 周度/阶段性总结与练习计划

- **数据持久化**:
  - 错题记录（含图片、分析结果、知识点标签）
  - 练习记录（题目、作答、正误）
  - 学习统计（按知识点/错因类型聚合）

- **学术诚信**:
  - 作业/考试场景检测
  - 强制提示模式（不给完整答案）
  - Guardrails 中间件实现

### 非目标（当前迭代）

- 不做实时考试监控/防作弊
- 不做与学校系统的数据对接
- 不做家长端独立 App（可通过同一 UI 切换视图）

### RAGFlow 集成策略

Study Copilot 对 RAGFlow 的依赖是**可选但推荐**的：

1. **无 RAG 模式**: 纯靠大模型内置知识完成讲解与生成，适合快速启动
2. **有 RAG 模式**: 接入教材 PDF/题库后，可实现：
   - 知识点讲解时引用教材原文
   - 练习生成时从题库检索同类题
   - 错题分析时关联教材章节

## 架构
